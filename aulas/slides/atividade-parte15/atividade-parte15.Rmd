---
title: ME414 - Estatística para Experimentalistas
subtitle: Atividade em Classe
output:
  ioslides_presentation:
    widescreen: yes
logo: ../logo-imecc.png
---


# Cadê o ônibus?

## Introdução


Imagine que eu queira estimar a proporção da área de Campinas que tenha pelo menos um ponto de ônibus a menos de 1 milha de distância.

Como fazer? Qual estratégia você consegue pensar para descobrir isso? É factível?

## Usando inferência estatística

Iremos utilizar apenas uma amostra de alguns locais de Campinas.

Não iremos fisicamente nos locais, usaremos o GoogleMaps.

Como obter uma amostra aleatória de locais?

## Amostra aleatória

Usando o RStudio, temos o pacote `mosaic` com a função `rgeo`, que permite sortear ao acaso latitude e longitude de uma área específica.

```{r,eval=FALSE}
library(mosaic)
samples = rgeo(n=total_amostras, latlim = c(?? , ??), lonlim=c(??, ??))
```

Problema: precisamos informar dois intervalos: para latitude e para longitude.


## Definindo a área de Campinas

Utilizando o site https://www3.epa.gov/storet/RECTANGLETool_Passback.html defini um retângulo ao redor do centro de Campinas.

<center><img src="figuras/fig01.png" width=500></center>

## Definindo a área de Campinas

E o site me informa os quatro pontos do retângulo em latitude e longitude:

<center><img src="figuras/fig02.png" width=150></center>


## Amostra aleatória

Usando o RStudio, temos o pacote `mosaic` com a função `rgeo`, que permite sortear ao acaso latitude e longitude de uma área específica.

```{r,eval=FALSE}
library(mosaic)
set.seed(XYZ)  # substitua XYZ pelos 3 ultimos digitos do RA
total_amostras = 25
amostras = rgeo(n=total_amostras, latlim = c(-23.00414,-22.791414), 
                lonlim=c(-47.143304,-46.994937))
```




## Amostra aleatória

Usaremos a seguinte função para chamar o GoogleMaps centralizado na localização da amostra e com um círculo ao redor.

```{r,eval=FALSE}
getLocation = function(counter) {
  googleMap(amostras[counter,"lat"], amostras[counter,"lon"], 
            mark=TRUE, maptype="terrain", radius=.1, browse=TRUE)
}

```


## Coleta dos dados


Você deverá então produzir uma tabela, em arquivo .csv com as seguintes colunas: "Latitude", "Longitude", "Ponto de ônibus dentro do raio?" (sim ou não).

Para salvar a tabela das latitudes e longitudes em arquivo .csv:

```{r,eval=FALSE}
write.csv(amostras, file="dados_XXXXXXX.csv") # substitua XXXXX pelo seu RA
```

E aí você vai preenchendo este arquivo com a terceira coluna.

## Resumo dos comandos

```{r,echo=TRUE,eval=FALSE}
library(mosaic)
set.seed(XYZ)  # substitua XYZ pelos 3 ultimos digitos do RA
total_amostras = 25
amostras = rgeo(n=total_amostras, latlim = c(-23.00414,-22.791414), 
                lonlim=c(-47.143304,-46.994937))
write.csv(amostras, file="dados_XXXXXXX.csv") # substitua XXXXX pelo seu RA

getLocation = function(counter) {
  googleMap(amostras[counter,"lat"], amostras[counter,"lon"], 
            mark=TRUE, maptype="terrain", radius=.1, browse=TRUE)
}

getLocation(1)
getLocation(2)

# etc...

getLocation(25)

```

Slides produzidos por:

* Samara Kiihl

